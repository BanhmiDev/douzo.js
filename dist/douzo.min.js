(function(e){"use strict";function t(n,r){var i=this;i.options=e.extend({},t.prototype.options,r);i.template=e(i.template);i.setContent(n);if(i.options.title==null){e(".douzo-title",i.template).addClass("douzo-empty-title")}else{e(".douzo-title",i.template).addClass("douzo-has-title").append(i.options.title);if(i.options.titleClass!=null){e(".douzo-titlebox",i.template).addClass(i.options.titleClass)}}if(i.options.buttons.length==0){var s=e('<span class="douzo-close-button"><i class="icon-remove"></i></span>');s.bind("click",function(){i.hide()});e(".douzo-content",i.template).prepend(s)}if(i.options.buttons.length>0){for(var o=0;o<i.options.buttons.length;o++){var u=e("<div>",{"class":"douzo-btnbox"});var a=i.options.buttons[o]["id"]?i.options.buttons[o]["id"]:"";var f=i.options.buttons[o]["classname"]?i.options.buttons[o]["classname"]:"";var l=e("<button>",{href:"javascript:void(0)",id:a,"class":"btn "+f,"data-value":i.options.buttons[o].val,click:function(){var t=e(this).attr("data-value");var n=e("#douzo-prompt-input").val();if(typeof i.options.callback==="function"){if(i.options.extension=="prompt"){if(i.options.callback(t,n)==false){return this}}else{if(i.options.callback(t)==false){return this}}}i.hide()}}).text(i.options.buttons[o].label);u.append(l);e(".douzo-actions",i.template).append(u)}}else{e(".douzo-footbox",i.template).remove()}if(i.options.modal){i.modal=e('<div class="douzo-modal"><div class="douzo-loading"><p>Loading...</p><div class="douzo-dot"></div><div class="douzo-dot"></div><div class="douzo-dot"></div><div class="douzo-dot"></div></div></div>').css({width:e(document).width(),height:e(document).height(),opacity:i.options.modalOpacity}).appendTo(document.body)}i.show();e(window).bind("resize scroll",function(){i.resize()});if(i.options.modalClick){e(".douzo-modal").bind("click",function(){i.hide()})}if(i.options.autoclose!=null){setTimeout(function(){i.hide()},i.options.autoclose)}}t.prototype={options:{width:"auto",height:"auto",viewport:{top:"0px",left:"0px"},buttons:[],center:true,title:null,titleClass:null,modal:true,modalOpacity:.5,modalClick:false,padding:"15px 10px 5px",unload:true,extension:null,autoclose:null,callback:null},template:'<div class="douzo"><div class="douzo-box"><div class="douzo-wrapper"><div class="douzo-titlebox"><span class="douzo-title"></span></div><div class="douzo-content"></div><div class="douzo-footbox"><div class="douzo-actions"></div></div></div></div></div>',visible:false,setContent:function(t){e(".douzo-box",this.template).css({height:this.options.height,width:this.options.width});if(this.options.extension=="alert"||this.options.extension=="ask"){e(".douzo-content",this.template).css({padding:this.options.padding}).empty().append('<div class="douzo-icon-warning"><i class="icon-exclamation-sign"></i></div>').append('<div class="douzo-text">'+t+"</div>")}else if(this.options.extension=="confirm"){e(".douzo-content",this.template).css({padding:this.options.padding}).empty().append('<div class="douzo-icon-confirm"><i class="icon-bullhorn douzo-icon"></i></div>').append('<div class="douzo-text">'+t+"</div>")}else if(this.options.extension=="prompt"){e(".douzo-content",this.template).css({padding:this.options.padding}).empty().append(t).append('<input id="douzo-prompt-input" type="text">')}else{e(".douzo-content",this.template).css({padding:this.options.padding}).empty().append(t)}},center:function(){return{top:e(window).height()/2-this.template.height()/2+"px",left:e(window).width()/2-this.template.width()/2+"px"}},show:function(){if(this.visible)return;e(".douzo-loading").remove();this.template.appendTo(document.body);if(this.options.center)this.options.viewport=this.center();if(this.options.extension!=null){this.template.css({top:-100,left:this.options.viewport.left}).animate({top:0})}else{this.template.css({top:this.options.viewport.top,left:this.options.viewport.left}).hide().fadeIn()}this.visible=true},hide:function(e){if(!this.visible)return;var t=this;if(t.options.modal&&t.modal!=null){this.modal.animate({opacity:0},300,function(){t.modal.remove()})}this.template.animate({opacity:0},300,function(){t.template.remove();t.visible=false;if(t.options.unload)t.unload()})},resize:function(){if(this.options.modal){e(".douzo-modal").css({width:e(document).width(),height:e(document).height()})}if(this.options.center){this.options.viewport=this.center();if(this.options.extension!=null){this.template.css({top:0,left:this.options.viewport.left})}else{this.template.css({top:this.options.viewport.top,left:this.options.viewport.left})}}},unload:function(){if(this.visible)this.hide();e(window).unbind("resize",function(){this.resize()});this.template.remove()}};window.Douzo=t;window.Douzo.notify=function(n,r,i){var s={extension:"notify",unload:true,modal:false,autoclose:2500,callback:r};e.extend(s,i);return new t(n,s)};window.Douzo.alert=function(n,r,i){var s={buttons:[{id:"confirm",classname:"douzo-danger",label:"OK",val:"confirm"}],extension:"alert",unload:true,callback:r};e.extend(s,i);return new t(n,s)};window.Douzo.confirm=function(n,r,i){var s={buttons:[{id:"confirm",classname:"douzo-success",label:"OK",val:"confirm"}],extension:"confirm",unload:true,callback:r};e.extend(s,i);return new t(n,s)};window.Douzo.prompt=function(n,r,i){var s={buttons:[{id:"yes",classname:"douzo-success",label:"Submit",val:"yes"},{id:"no",classname:"douzo-danger",label:"Cancel",val:"no"}],extension:"prompt",unload:true,callback:r};e.extend(s,i);return new t(n,s)};window.Douzo.ask=function(n,r,i){var s={buttons:[{id:"yes",classname:"douzo-success",label:"Yes",val:"yes"},{id:"no",classname:"douzo-danger",label:"No",val:"no"}],extension:"ask",unload:true,callback:r};e.extend(s,i);return new t(n,s)};window.Douzo.ajax=function(n,r){var i={params:{},unload:true};e.extend(i,r);var s={url:n,data:i.params,dataType:"html",error:function(e,t,n){console.log(e.responseText)},success:function(e){new t(e,i)}};e.ajax(s)};window.Douzo.img=function(n,r){var i={width:"auto",height:"auto",unload:true};e.extend(i,r);var s=new Image;s.src=n;if(i.width!="auto"){s.className="douzo-resize-img"}new t(s,i)}})($)